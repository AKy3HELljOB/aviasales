(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),s=n(10),i=n.n(s),u=(n(16),n(3)),o=n.n(u),l=n(8),j=n(6),d=n(4),b=n(2),h=n.p+"static/media/logo.8bb77c6b.svg",f=(n(18),function(e){var t=e.onChange,n=e.checked,r=e.text;return Object(c.jsx)("div",{children:Object(c.jsxs)("label",{className:"checkbox",children:[Object(c.jsx)("input",{type:"checkbox",className:"input visually-hidden",onChange:t,checked:n}),Object(c.jsx)("span",{className:"checked"}),r]})})}),O=a.a.createContext(null),p="none",x="three",v={all:!0,none:!0,one:!0,two:!0,three:!0},m=function(e,t){var n=function(e){return Object(b.a)(Object(b.a)({},e),{},{all:e.none&&e.one&&e.two&&e.three})};switch(t.type){case"all":return{all:!e.all,none:!e.all,one:!e.all,two:!e.all,three:!e.all};case p:return n(Object(b.a)(Object(b.a)({},e),{},{none:!e.none}));case"one":return n(Object(b.a)(Object(b.a)({},e),{},{one:!e.one}));case"two":return n(Object(b.a)(Object(b.a)({},e),{},{two:!e.two}));case x:return n(Object(b.a)(Object(b.a)({},e),{},{three:!e.three}));default:throw console.log(t.type),new Error}},g=function(){var e=Object(r.useContext)(O),t=e.filterState,n=e.dispatchFilter,a=[{text:"\u0412\u0441\u0435",checked:t.all,key:"all"},{text:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",checked:t.none,key:p},{text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",checked:t.one,key:"one"},{text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:t.two,key:"two"},{text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:t.three,key:x}];return Object(c.jsxs)("div",{className:"filter",children:[Object(c.jsx)("h1",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a "}),a.map((function(e){var t=e.text,r=e.checked,a=e.key;return Object(c.jsx)(f,{text:t,checked:r,onChange:function(e){console.log(e.target),n({type:a})}},a)}))]})},k=a.a.createContext(null),w="cheapest",y="fastest",N={selected:w},S=function(e,t){switch(t.type){case w:return{selected:w};case y:return{selected:y};default:throw new Error}},C=(n(19),function(){var e=Object(r.useContext)(k),t=e.orderState,n=e.dispatchOrder,a=[{key:w,style:"button left",text:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"},{key:y,style:"button right",text:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}];return Object(c.jsx)("div",{className:"switch",children:Object(c.jsx)("div",{children:a.map((function(e){var r=e.key,a=e.style,s=e.text;return Object(c.jsxs)("span",{children:[Object(c.jsx)("input",{type:"radio",id:r,name:"order",checked:t.selected===r,className:"input visually-hidden",onChange:function(e){n({type:e.target.id})}}),Object(c.jsx)("label",{htmlFor:r,className:a,children:s})]},r)}))})})}),E=(n(20),function(e){var t,n,r=e.price,a=e.carrier;return Object(c.jsxs)("div",{className:"headerWrapper",children:[Object(c.jsx)("div",{className:"price",children:(n=r,n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" \u0420")}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{children:Object(c.jsx)("img",{className:"logo",src:(t=a,"http://pics.avs.io/99/36/".concat(t,".png")),alt:a})})]})}),I=(n(21),function(e){switch(e){case 0:return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";case 1:return e+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";case 2:case 3:case 4:return e+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";default:return e+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}}),R=function(e){return(e<10?"0":"")+e},P=function(e){return e.toLocaleString("ru-RU",{timezone:"UTC",hour:"numeric",minute:"numeric"})},B=function(e,t){var n=Date.parse(e),c=new Date(n),r=new Date(n+6e4*t);return P(c)+" - "+P(r)},D=function(e){return Object(c.jsxs)("div",{className:"infoBlockWrapper",children:[Object(c.jsx)("div",{className:"row1",children:e.label}),Object(c.jsxs)("div",{className:"row2",children:[e.data," "]})]})},F=function(e){return Object(c.jsxs)("div",{className:"infoWrapper",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(D,{label:e.origin+" - "+e.destination,data:B(e.date,e.duration)})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(D,{className:"column",label:"\u0412 \u043f\u0443\u0442\u0438",data:(t=e.duration,R(~~(t/60)+"\u0447 "+R(t%60)+"\u043c"))})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(D,{className:"column",label:I(e.stops.length),data:e.stops.join(", ")})})]});var t};F.defaultProps={stops:[]};var T=F,W=(n(22),function(e){return Object(c.jsxs)("div",{className:"ticket",children:[Object(c.jsx)(E,Object(b.a)({},e)),Object(c.jsx)(T,Object(b.a)({},e.segments[0])),Object(c.jsx)(T,Object(b.a)({},e.segments[1]))]})});W.defaultProps={};var q=W;function J(e){return 200===e.status}function U(e,t,n){return n?n(e):console.log(t,e)}function z(){return(z=Object(j.a)(o.a.mark((function e(t,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://front-test.beta.aviasales.ru/search");case 3:J(c=e.sent)&&c.json().then((function(e){return t(e)}),(function(e){return U(e,"getRequestId: ",n)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),U(e.t0,"getRequestId: ",n);case 10:case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function A(e,t,n){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(o.a.mark((function e(t,n,c){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(t));case 4:J(r=e.sent)&&r.json().then((function(e){return n(e)}),(function(e){return U(e,"getTickets: ",c)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),U(e.t0,"getTickets: ",c);case 11:case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}n(23);var L=function(){return Object(c.jsx)("div",{className:"tab",children:Object(c.jsx)(C,{})})},M=function(e){var t=0;return e.length>0?Object(c.jsx)("div",{className:"tickets",children:e.map((function(e){return Object(r.createElement)(q,Object(b.a)(Object(b.a)({},e),{},{key:t++}))}))}):null};var G=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),i=Object(d.a)(s,2),u=i[0],b=i[1],f=Object(r.useState)([]),p=Object(d.a)(f,2),x=p[0],w=p[1],C=Object(r.useState)([]),E=Object(d.a)(C,2),I=E[0],R=E[1],P=Object(r.useState)([]),B=Object(d.a)(P,2),D=B[0],F=B[1],T=Object(r.useReducer)(m,v),W=Object(d.a)(T,2),q=W[0],J=W[1],U=Object(r.useReducer)(S,N),H=Object(d.a)(U,2),G=H[0],K=H[1];return Object(r.useEffect)((function(){!function(e,t){z.apply(this,arguments)}((function(e){return a(e.searchId)}))}),[]),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!=t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[e,t])}(Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(n,(function(e){!0===e.stop&&b(!0),w([].concat(Object(l.a)(x),Object(l.a)(e.tickets)))}));case 2:case"end":return e.stop()}}),e)}))),u?null:1e3),Object(r.useEffect)((function(){return R(x.filter((function(e){return function(e,t){if(t.all)return!0;switch(e.segments[0].stops.length+e.segments[1].stops.length){case 0:return t.none;case 1:return t.one;case 2:return t.two;case 3:return t.three;default:return!1}}(e,q)})))}),[x,q]),Object(r.useEffect)((function(){R(I.sort((function(e,t){return G.selected===y?function(e,t){var n=e.segments[0].duration-t.segments[0].duration,c=e.segments[1].duration-t.segments[1].duration;return n+c===0?n:n+c}(e,t):function(e,t){return e.price-t.price}(e,t)}))),F(I.slice(0,5))}),[I,G]),Object(c.jsx)(O.Provider,{value:{dispatchFilter:J,filterState:q},children:Object(c.jsx)(k.Provider,{value:{dispatchOrder:K,orderState:G},children:Object(c.jsxs)("div",{className:"app unselectable",children:[Object(c.jsx)("div",{className:"appHeader",children:Object(c.jsx)("img",{src:h,alt:"Aviasales logo"})}),Object(c.jsxs)("div",{className:"app-wrapper",children:[Object(c.jsx)(g,{}),Object(c.jsx)(L,{}),M(D)]})]})})})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(G,{})}),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.2eb9fd45.chunk.js.map